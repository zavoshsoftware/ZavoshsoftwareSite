@model ViewModels.PortfolioDetailViewModel
@{
    ViewBag.ogType = "article";
    ViewBag.ogUrl = "https://zavoshsoftware.com/portfoliodetail/" + @Model.UrlParameter;
    ViewBag.ogImage = "https://zavoshsoftware.com/" + @Model.ImageUrl;
    ViewBag.ogSitename = "شرکت زاوش";
}

@section StructuredData
{

    <link href="/Content/star-rating.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="~/Scripts/UI/star-rating.js"></script>
    
	<script type="application/ld+json">
        {
        "@@context": "http://schema.org",
        "@@type": "Article ",
        "mainEntityOfPage":
        {
        "@@type":"WebPage",
        "@@id":"@ViewBag.Canonical"
        },
        "headline":"@ViewBag.Title",
        "image":["@ViewBag.image"],
        "datePublished":"@ViewBag.creationDate",
        "dateModified": "@Model.DateModified",
        "author":
        {
        "@@type":"Person",
        "name":"زاوش"
        },
        "publisher":
        {
        "@@type":"Organization",
        "name":"زاوش",
        "logo":{
        "@@type":"ImageObject",
        "url":"https://zavoshsoftware.com/Images/backgrounds/logozavosh.png"
        }
        },
        "description":"@ViewBag.Description"
		@*,
        "aggregateRating":
        {
        "@@type":"AggregateRating",
        "ratingValue":"@ViewBag.rate",
        "bestRating":"5",
        "ratingCount":"@ViewBag.RatingCount"
        }*@
        }
    </script>

@*<script type="application/ld+json">
    {

    "@@context": "http://schema.org",
    "@@type": "BreadcrumbList",
    "itemListElement":
    [{
    "@@type":"ListItem",
    "position":1,
    "item":{
    "@@id":"https://zavoshsoftware.com",
    "name":"زاوش",
    "image":"https://zavoshsoftware.com/Images/backgrounds/logozavosh.png"
    }
    },
    {
    "@@type":"ListItem",
    "position":2,
    "item":{
    "@@id":"https://zavoshsoftware.com/portfolio",
    "name":"نمونه کارها",
    "image":"https://zavoshsoftware.com/Images/backgrounds/logozavosh.png"
    }
    },
    {
    "@@type":"ListItem",
    "position": 3,
    "item":{
    "@@id":"@ViewBag.Canonical",
    "name":"@Model.Title",
    "image":"@ViewBag.image"
    }
    }
    ]
    }
</script>*@
}
<div id="page-header">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">

                <ol class="breadcrumb">
                    <li><a href="/">زاوش</a></li>
                    <li><a href="/portfolio/@Model.PortfolioGroupUrlParameter">@Model.PortfolioGroupTitle</a></li>
                    <li class="active">@Model.Title</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <div class="blog-article">
                <div class="blog-article-thumbnail">
                    <img src="@Model.ImageUrl" alt="@Model.Title" />
                </div>
                <div class="blog-article-details">
                    <span>@Model.Date</span>
                    <h1>@Model.Title</h1>

                    <p>
                        <i class="miu-icon-other_conversation_review_comment_bubble_talk_outline_stroke"></i>
                    </p>
                </div>
                @Html.Raw(Model.Body)

                <p class="url-box">

                    <div class="row">
                        <div class="col-md-3 rating-link">

                            <a href="@Model.UrlAddress" target="_blank" rel="nofollow" class="btn btn-info">مشاهده وب سایت</a>
                        </div>
                        @Html.Partial("FrontEndLayout/_RatingPartial")
                    </div>
                </p>
            </div>
        </div>
        <div class="col-sm-4">
            <aside>
                <div class="widget widget-categories">
                    <div class="widget-title">سایر نمونه کارها</div>
                    <ul>
                        @foreach (var page in Model.SidebarPages)
                        {
                            <li><a href="/Portfoliodetail/@page.UrlParameter">@page.Title</a></li>
                        }
                    </ul>
                </div>
            </aside>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Scripts/UI/custom.js"></script>
}



@section ratingScripts{
    <script>
        jQuery(document).ready(function() {
            $("#input-21f").rating({
                starCaptions: function(val) {
                    if (val < 3) {
                        return val;
                    } else {
                        return 'high';
                    }
                },
                starCaptionClasses: function(val) {
                    if (val < 3) {
                        return 'label label-danger';
                    } else {
                        return 'label label-success';
                    }
                },
                hoverOnClear: false
            });
            var $inp = $('#rating-input');

            $inp.rating({
                min: 0,
                max: 5,
                step: 1,
                size: 'lg',
                showClear: false
            });

            $('#btn-rating-input').on('click',
                function() {
                    $inp.rating('refresh',
                        {
                            showClear: true,
                            disabled: !$inp.attr('disabled')
                        });
                });


            $('.btn-danger').on('click',
                function() {
                    $("#kartik").rating('destroy');
                });

            $('.btn-success').on('click',
                function() {
                    $("#kartik").rating('create');
                });

            $inp.on('rating.change',
                function() {
                    alert($('#rating-input').val());
                });


            $('.rb-rating').rating({
                'showCaption': true,
                'stars': '3',
                'min': '0',
                'max': '3',
                'step': '1',
                'size': 'xs',
                'starCaptions': { 0: 'status:nix', 1: 'status:wackelt', 2: 'status:geht', 3: 'status:laeuft' }
            });
            $("#input-21c").rating({
                min: 0,
                max: 8,
                step: 0.5,
                size: "xl",
                stars: "8"
            });
            //$("#submitRating").click(function () {


        });

        function SubmitRate() {
            var spanStarNumber;
            var starNumber;
            var pageId = '@ViewBag.id';
            var badgeprimary = $(".badge-primary")[0];
            var badgeInfo = $(".badge-info")[0];
            var badgesecondary = $(".badge-secondary")[0];
            var badgewarning = $(".badge-warning")[0];
            if (badgeprimary !== undefined) {
                spanStarNumber = $(".badge-primary")[0].childNodes[0].data;
                starNumber = spanStarNumber;

            } else if (badgeInfo !== undefined) {
                spanStarNumber = $(".badge-info")[0].childNodes[0].data;
                starNumber = spanStarNumber;
            } else if (badgesecondary !== undefined) {
                spanStarNumber = $(".badge-secondary")[0].childNodes[0].data;
                var starNumberSplit = spanStarNumber.split(' ');
                starNumber = starNumberSplit[0];

            } else if (badgewarning !== undefined) {
                spanStarNumber = $(".badge-warning")[0].childNodes[0].data;
                starNumber = spanStarNumber;
            } else {
                spanStarNumber = $(".badge-success")[0].childNodes[0].data;
                starNumber = spanStarNumber;

            }
            $.ajax(
                {
                    url: "/Pages/teststar",
                    data: { rateStar: starNumber, id: pageId},
                    type: "GET"
                }).done(function(result) {
                if (result === "true") {
                    alert('امتیاز شما با موفقیت ثبت شد.');
                } else if (result === "false") {
                    alert('خطایی رخ داد!! مجددا تلاش نمایید');

                }
            });

        }
    </script>
}